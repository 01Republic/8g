# 8G 제품 요구사항 명세서 (PRD)

**문서 버전**: 1.0
**최종 수정일**: 2025-11-11
**상태**: 활성 개발 중
**브랜치**: `only-builder`

---

## 📋 목차

1. [제품 개요](#1-제품-개요)
2. [시스템 아키텍처](#2-시스템-아키텍처) → [상세 보기](./prd/시스템-아키텍처.md)
3. [핵심 기능](#3-핵심-기능) → [기능 명세서](./product-specs/README.md)
4. [워크플로우 JSON 명세](#4-워크플로우-json-명세) → [상세 보기](./prd/워크플로우-JSON-명세.md)
5. [사용자 워크플로우](#5-사용자-워크플로우) → [상세 보기](./prd/사용자-워크플로우.md)
6. [기술 요구사항](#6-기술-요구사항) → [상세 보기](./prd/기술-요구사항.md)
7. [데이터 모델](#7-데이터-모델) → [상세 보기](./prd/데이터-모델.md)
8. [알려진 이슈 및 제한사항](#8-알려진-이슈-및-제한사항)
9. [향후 로드맵](#9-향후-로드맵)

---

## 1. 제품 개요

### 1.1 제품 비전

8G는 **노코드/로우코드 웹 자동화 플랫폼**으로, 비개발자도 복잡한 웹 스크래핑 및 데이터 추출 워크플로우를 비주얼 인터페이스로 설계하고 실행할 수 있도록 합니다.

### 1.2 타겟 사용자

| 사용자 그룹 | 주요 사용 사례 | 기대 효과 |
|-----------|-------------|---------|
| **Product Managers** | SaaS 제품 통합 워크플로우 구축 | 개발 의존도 감소 |
| **Operations Teams** | 반복적인 데이터 수집 자동화 | 수작업 시간 80% 절감 |
| **Customer Success** | 고객 워크스페이스 데이터 추출 | 고객 지원 속도 향상 |
| **Developers** | 프로토타이핑 및 빠른 스크래핑 구현 | 개발 시간 50% 단축 |

### 1.3 핵심 가치 제안

```
기존 방식 (코드 기반 스크래핑)        8G 플랫폼
────────────────────────────        ──────────
- Python/Selenium 코드 작성  →      - 드래그앤드롭 워크플로우
- 셀렉터 하드코딩             →      - 비주얼 엘리먼트 선택
- 에러 처리 수동 구현          →      - 자동 재시도 및 에러 처리
- 유지보수 어려움             →      - 중앙화된 워크플로우 관리
- 배포 및 스케일링 복잡        →      - 브라우저 확장으로 즉시 실행
```

**측정 가능한 가치**:
- 워크플로우 개발 시간: 2일 → 30분 (96% 감소)
- 유지보수 비용: 월 20시간 → 월 2시간 (90% 감소)
- 셀렉터 변경 대응: 1일 → 5분 (99% 감소)

---

## 2. 시스템 아키텍처

### 2.1 기술 스택 요약

```
Frontend:  React 19, React Router 7, React Flow 12
Backend:   Express 5, TypeORM 0.3.27
Database:  MySQL 3306
UI:        shadcn/ui, Radix UI, TailwindCSS 4
Validation: Zod 3.25.76
SDK:       scordi-extension v1.16.0 (브라우저 확장)
```

### 2.2 시스템 구조도 (간략)

```
┌──────────────┐    ┌──────────────┐    ┌──────────────┐
│ 사용자       │───▶│ React 빌더   │───▶│ MySQL DB     │
│ (브라우저)   │    │ (워크플로우  │    │ (워크플로우  │
└──────────────┘    │  디자인)     │    │  저장)       │
                    └──────┬───────┘    └──────────────┘
                           │
                           ▼
                    ┌──────────────┐
                    │ 브라우저 확장│
                    │ (워크플로우  │
                    │  실행)       │
                    └──────────────┘
```

**📖 상세 아키텍처 문서**: [시스템-아키텍처.md](./prd/시스템-아키텍처.md)

---

## 3. 핵심 기능

### 3.1 기능 목록 (우선순위별)

| 기능 ID | 기능명 | 우선순위 | 상태 |
|--------|-------|---------|------|
| F-001 | 비주얼 워크플로우 빌더 | P0 | ✅ 구현완료 |
| F-002 | 블록 시스템 (20+ 타입) | P0 | ✅ 구현완료 |
| F-003 | 조건부 분기 | P0 | ✅ 구현완료 |
| F-004 | 변수 치환 | P0 | ✅ 구현완료 |
| F-005 | 루프 설정 | P0 | ✅ 구현완료 |
| F-006 | JSONata 표현식 테스팅 | P0 | ✅ 구현완료 |
| F-007 | 워크플로우 실행 | P0 | ✅ 구현완료 |
| F-008 | 결과 시각화 | P0 | ✅ 구현완료 |
| F-009 | Import/Export | P1 | ✅ 구현완료 |
| F-010 | 자동 레이아웃 | P1 | ✅ 구현완료 |
| F-011 | 워크플로우 버전 관리 | P2 | 🔄 계획 중 |
| F-012 | 실시간 협업 | P2 | 🔄 계획 중 |
| F-013 | 자동화 테스트 | P2 | ⚠️ 미구현 |

**우선순위**:
- **P0**: Critical (핵심 기능, 없으면 제품 작동 불가)
- **P1**: High (중요 기능, 사용성 향상)
- **P2**: Medium (부가 기능, 향후 개선)
- **P3**: Low (선택 기능, 장기 계획)

### 3.2 기능별 상세 명세

각 기능의 상세 명세는 **기능 명세서 인덱스**를 참조하세요:

**📖 [기능 명세서 인덱스](./product-specs/README.md)**

주요 기능:
- [F-001: 비주얼 워크플로우 빌더](./product-specs/F-001-visual-workflow-builder.md)
- [F-002: 블록 시스템](./product-specs/F-002-block-system.md)
- [F-003: 조건부 분기](./product-specs/F-003-conditional-branching.md)

---

## 4. 워크플로우 JSON 명세

### 4.1 기본 구조

```typescript
interface FormWorkflow {
  version: string;              // "1.0"
  start: string;                // 시작 스텝 ID
  steps: WorkflowStep[];        // 워크플로우 스텝 배열
  targetUrl?: string;           // 타겟 웹사이트 URL
  parser?: {                    // 출력 변환
    expression: string;         // JSONPath 표현식
  };
  vars?: Record<string, any>;   // 변수 정의
}
```

### 4.2 간단한 예시

```json
{
  "version": "1.0",
  "start": "extract_title",
  "steps": [
    {
      "id": "extract_title",
      "block": {
        "name": "get-text",
        "selector": "h1.page-title",
        "findBy": "cssSelector"
      },
      "next": "extract_price"
    },
    {
      "id": "extract_price",
      "block": {
        "name": "get-text",
        "selector": ".price",
        "findBy": "cssSelector"
      }
    }
  ],
  "targetUrl": "https://example.com/product"
}
```

**📖 전체 워크플로우 JSON 명세**: [워크플로우-JSON-명세.md](./prd/워크플로우-JSON-명세.md)

---

## 5. 사용자 워크플로우

### 5.1 주요 사용 시나리오

#### 시나리오 1: 워크플로우 생성
```
사용자 → "Add Block" 클릭 → 블록 선택 → 설정 → 연결 → 저장
```

#### 시나리오 2: 워크플로우 실행
```
사용자 → 워크플로우 열기 → 변수 설정 → "Run" 클릭 → 결과 확인
```

#### 시나리오 3: 데이터 변환
```
사용자 → API 호출 블록 추가 → transform-data 블록 추가 →
JSONata 표현식 작성 → 테스트 → 실행
```

**📖 상세 사용자 워크플로우**: [사용자-워크플로우.md](./prd/사용자-워크플로우.md)

---

## 6. 기술 요구사항

### 6.1 기능적 요구사항 (요약)

**FR-001**: 드래그앤드롭으로 노드 생성 및 연결 가능
**FR-002**: Zod 스키마로부터 UI 자동 생성
**FR-003**: 복잡한 조건부 로직 지원 (AND/OR/JSONPath)
**FR-004**: 변수 치환 시스템 (`${vars.varName}`)
**FR-005**: 브라우저 확장을 통한 워크플로우 실행

### 6.2 비기능적 요구사항 (요약)

**NFR-001 성능**: 100+ 노드 렌더링 지연 없음
**NFR-002 확장성**: 1000+ 워크플로우 지원
**NFR-003 신뢰성**: 워크플로우 저장 성공률 99.9%
**NFR-004 사용성**: 기본 워크플로우 생성 시간 < 5분
**NFR-005 보안**: 모든 DB 쿼리 파라미터화, XSS 방지

**📖 전체 요구사항 명세**: [기술-요구사항.md](./prd/기술-요구사항.md)

---

## 7. 데이터 모델

### 7.1 주요 데이터베이스 테이블

**integration_app_workflow_metadata**
- 워크플로우 메타데이터 및 JSON 저장
- 필드: id, description, meta (JSON), type, product_id, created_at, updated_at

**integration_app_workflow_execution_history** (계획 중)
- 워크플로우 실행 히스토리 추적
- 필드: id, workflow_id, status, result, error, executed_at

**📖 전체 데이터 모델 및 스키마**: [데이터-모델.md](./prd/데이터-모델.md)

---

## 8. 알려진 이슈 및 제한사항

### 8.1 기술 부채 (우선순위별)

**🔴 Critical**
- ⚠️ 데이터베이스 마이그레이션 도구 없음 (수동 SQL 필요)
- ⚠️ 외부 API 의존성 불명확 (localhost:8000)
- ⚠️ TypeORM 지연 초기화 (첫 요청 지연)

**🟡 High**
- ⚠️ 자동화 테스트 없음
- ⚠️ Zod 내부 API 사용 (`_def`)
- ⚠️ Error Boundary 없음

**🟢 Medium**
- 대형 컴포넌트 파일 (500+ 줄)
- 워크플로우 JSON 검증 미흡
- 상태 의존성 분산

### 8.2 현재 제한사항

1. **브라우저 확장 필수**: 확장 없이는 워크플로우 실행 불가
2. **Chrome 전용**: Firefox 지원 계획 없음
3. **수동 SQL**: 스키마 변경 시 수동 SQL 실행 필요
4. **버전 관리 없음**: 워크플로우 덮어쓰기만 가능
5. **인증 시스템 없음**: 빌더에 인증 미구현

---

## 9. 향후 로드맵

### Q1 2025 (우선순위)
- ✅ 데이터베이스 마이그레이션 도구 도입
- ✅ 자동화 테스트 프레임워크 구축
- ✅ API 의존성 문서화
- ✅ Error Boundary 추가

### Q2 2025
- 🔄 워크플로우 버전 관리 시스템
- 🔄 실행 히스토리 추적
- 🔄 성능 최적화 (결과 가상화)
- 🔄 개선된 에러 처리

### Q3 2025
- 🔄 실시간 협업 (WebSocket)
- 🔄 워크플로우 템플릿 라이브러리
- 🔄 고급 스케줄링
- 🔄 워크플로우 분석 대시보드

### Q4 2025
- 🔄 Firefox 확장 지원
- 🔄 워크플로우 마켓플레이스
- 🔄 AI 기반 워크플로우 생성
- 🔄 엔터프라이즈 기능 (SSO, RBAC)

---

## 10. 성공 지표 (KPI)

### 제품 지표
- **MAU** (Monthly Active Users): 월간 활성 사용자
- **워크플로우 생성 수**: 사용자당 평균 워크플로우 수
- **실행 성공률**: 워크플로우 실행 성공 비율 (목표: 95%+)
- **평균 워크플로우 복잡도**: 워크플로우당 평균 스텝 수

### 기술 지표
- **시스템 가동률**: 99.9%
- **API 응답 시간**: < 500ms (p95)
- **DB 쿼리 시간**: < 200ms (p95)
- **프론트엔드 로드 시간**: < 2s

### 비즈니스 지표
- **시간 절감**: 수동 스크립팅 대비 시간 절감률
- **유지보수 비용 절감**: 스크래핑 유지보수 비용 감소율
- **사용자 만족도**: NPS (Net Promoter Score)

---

## 11. 참고 문서

### 내부 문서
- [문서화 원칙](./DOCUMENTATION_PRINCIPLES.md)
- [기능 명세서 인덱스](./product-specs/README.md)
- [기술 아키텍처](../CLAUDE.md)

### 외부 참고
- [React Flow 문서](https://reactflow.dev/)
- [React Router 7 문서](https://reactrouter.com/)
- [TypeORM 문서](https://typeorm.io/)
- [Zod 문서](https://zod.dev/)
- [JSONata 문서](https://jsonata.org/)

---

## 용어 정의

- **블록 (Block)**: 워크플로우의 단일 자동화 액션 (예: 클릭, 텍스트 추출)
- **워크플로우 (Workflow)**: 자동화 작업을 수행하는 블록들의 시퀀스
- **스텝 (Step)**: 워크플로우의 실행 단위 (블록 + 메타데이터)
- **엣지 (Edge)**: 비주얼 그래프에서 두 노드 간 연결
- **조건부 엣지**: 조건 로직이 있는 엣지 (if/else 분기)
- **변수 치환**: `${vars.varName}` 문법을 사용한 동적 값 주입
- **JSONPath**: JSON 구조를 탐색하는 표현식 언어
- **JSONata**: JSON 데이터 쿼리 및 변환 언어
- **스키마 기반 UI**: Zod 스키마로부터 자동 생성되는 UI 컴포넌트
- **확장 SDK**: 워크플로우를 실행하는 브라우저 확장

---

## 변경 이력

| 버전 | 날짜 | 변경 내용 | 작성자 |
|-----|------|---------|-------|
| 1.0 | 2025-11-11 | PRD 최초 작성 (한글 변환 및 200줄 제한 적용) | System |

---

**문서 소유자**: Product Team
**최종 리뷰일**: 2025-11-11
**다음 리뷰일**: 2025-12-11
