# ìë™ ë ˆì´ì•„ì›ƒ - ì „ëµ ë° ìµœì í™”

**ìƒìœ„ ë¬¸ì„œ**: [F-010: ìë™ ë ˆì´ì•„ì›ƒ](../F-010-ìë™-ë ˆì´ì•„ì›ƒ.md)
**ìµœì¢… ìˆ˜ì •ì¼**: 2025-11-11

---

## ê°œìš”

ì´ ë¬¸ì„œëŠ” ì›Œí¬í”Œë¡œìš° ë ˆì´ì•„ì›ƒ ë°©í–¥, íŒ¨í„´ë³„ ì „ëµ, ì„±ëŠ¥ ìµœì í™”, ì»¤ìŠ¤í…€ ë ˆì´ì•„ì›ƒì„ ë‹¤ë£¹ë‹ˆë‹¤.

---

## ë ˆì´ì•„ì›ƒ ë°©í–¥

### 1. Top-to-Bottom (TB)

**ê¸°ë³¸ ë°©í–¥**: ìœ„ì—ì„œ ì•„ë˜ë¡œ

```
    [Start]
       â†“
   [Step 1]
       â†“
   [Step 2]
    â†™   â†˜
[Step 3] [Step 4]
    â†˜   â†™
   [Step 5]
```

**ì‚¬ìš© ì‚¬ë¡€**: ì¼ë°˜ì ì¸ ì›Œí¬í”Œë¡œìš°, ì„¸ë¡œ ìŠ¤í¬ë¡¤ ì„ í˜¸ ì‹œ

---

### 2. Left-to-Right (LR)

**ë°©í–¥**: ì™¼ìª½ì—ì„œ ì˜¤ë¥¸ìª½ìœ¼ë¡œ

```
[Start] â†’ [Step 1] â†’ [Step 2] â†’ [Step 3]
                         â†“
                    [Step 4]
```

**ì‚¬ìš© ì‚¬ë¡€**: ë„“ì€ í™”ë©´, ê¸´ ì„ í˜• ì›Œí¬í”Œë¡œìš°

---

### 3. Right-to-Left (RL)

ì˜¤ë¥¸ìª½ì—ì„œ ì™¼ìª½ìœ¼ë¡œ (RTL ì–¸ì–´ ì§€ì› ì‹œ)

---

### 4. Bottom-to-Top (BT)

ì•„ë˜ì—ì„œ ìœ„ë¡œ (íŠ¹ìˆ˜ ì¼€ì´ìŠ¤)

---

## ì›Œí¬í”Œë¡œìš° íŒ¨í„´ë³„ ì „ëµ

### 1. ì„ í˜• ì›Œí¬í”Œë¡œìš°

```
[Start] â†’ [Step 1] â†’ [Step 2] â†’ [Step 3] â†’ [End]
```

**íŠ¹ì§•**: ë‹¨ìˆœí•œ ìˆœì°¨ ì‹¤í–‰

**ì¶”ì²œ ë ˆì´ì•„ì›ƒ**:

- Top-to-Bottom (ê¸°ë³¸)
- Left-to-Right (ë„“ì€ í™”ë©´)

**ì„¤ì •**:

```typescript
applyDagreLayout(nodes, edges, {
  direction: "TB",
  rankSep: 100,
  nodeSep: 50,
});
```

---

### 2. ë¶„ê¸° ì›Œí¬í”Œë¡œìš°

```
         [Start]
            â†“
         [Step 1]
          â†™   â†˜
    [Step 2A] [Step 2B]
          â†˜   â†™
         [Step 3]
```

**íŠ¹ì§•**: ì¡°ê±´ë¶€ ë¶„ê¸°

**ì¶”ì²œ ë ˆì´ì•„ì›ƒ**: Top-to-Bottom, ì¤‘ì•™ ì •ë ¬

**ì„¤ì •**:

```typescript
applyDagreLayout(nodes, edges, {
  direction: "TB",
  rankSep: 120,
  nodeSep: 80, // ë¶„ê¸° ì‹œ ì—¬ìœ  ê³µê°„
});
```

---

### 3. ë³‘ë ¬ ì›Œí¬í”Œë¡œìš° (ê³„íš)

```
      [Start]
     â†™   â†“   â†˜
[Step 1][Step 2][Step 3]
     â†˜   â†“   â†™
       [End]
```

**íŠ¹ì§•**: ë…ë¦½ì ì¸ ë³‘ë ¬ ì‹¤í–‰

**ì¶”ì²œ ë ˆì´ì•„ì›ƒ**: ë™ì¼ ë ˆë²¨ ë°°ì¹˜

---

### 4. ë³µí•© ì›Œí¬í”Œë¡œìš°

```
         [Start]
            â†“
         [Loop]â”€â”€â”€â”€â”
         â†™   â†˜     â”‚
    [Step A] [Step B]
         â†˜   â†™     â”‚
       [Merge]     â”‚
           â†“       â”‚
      [Condition]â”€â”€â”˜
           â†“
         [End]
```

**íŠ¹ì§•**: ë£¨í”„ + ë¶„ê¸° + ì¡°ê±´

**ì¶”ì²œ ë ˆì´ì•„ì›ƒ**: Dagre ìë™ ìµœì í™”

**ì„¤ì •**:

```typescript
applyDagreLayout(nodes, edges, {
  direction: "TB",
  rankSep: 150,
  nodeSep: 100,
});
```

---

## ì¶©ëŒ ë°©ì§€

### ì—£ì§€ ê²¹ì¹¨ ë°©ì§€

```typescript
// Dagre ê³ ê¸‰ ì„¤ì •
g.setGraph({
  rankdir: "TB",
  ranksep: 100,
  nodesep: 50,
  edgesep: 20, // ì—£ì§€ ê°„ê²©
  marginx: 20, // Xì¶• ì—¬ë°±
  marginy: 20, // Yì¶• ì—¬ë°±
});
```

---

### ë…¸ë“œ ê²¹ì¹¨ ë°©ì§€

```typescript
function ensureNoOverlap(nodes: Node[]): Node[] {
  const occupied = new Set<string>();

  return nodes.map((node) => {
    let { x, y } = node.position;
    let key = `${x},${y}`;

    // ì´ë¯¸ ì ìœ ëœ ìœ„ì¹˜ë©´ ì¡°ì •
    while (occupied.has(key)) {
      x += 10;
      y += 10;
      key = `${x},${y}`;
    }

    occupied.add(key);

    return {
      ...node,
      position: { x, y },
    };
  });
}
```

---

## ë°˜ì‘í˜• ë ˆì´ì•„ì›ƒ

### í™”ë©´ í¬ê¸°ì— ë”°ë¥¸ ë ˆì´ì•„ì›ƒ

```typescript
function useResponsiveLayout() {
  const [layoutDirection, setLayoutDirection] = useState<"TB" | "LR">("TB");

  useEffect(() => {
    const handleResize = () => {
      const width = window.innerWidth;

      // ë„“ì€ í™”ë©´: ì¢Œìš° ë°°ì¹˜
      if (width > 1600) {
        setLayoutDirection("LR");
      } else {
        setLayoutDirection("TB");
      }
    };

    window.addEventListener("resize", handleResize);
    handleResize();

    return () => window.removeEventListener("resize", handleResize);
  }, []);

  return layoutDirection;
}
```

---

## ì„±ëŠ¥ ìµœì í™”

### 1. ëŒ€ê·œëª¨ ê·¸ë˜í”„ ì²˜ë¦¬

```typescript
// 100ê°œ ì´ìƒ ë…¸ë“œ ì‹œ ìµœì í™”
function applyOptimizedLayout(nodes: Node[], edges: Edge[]): Node[] {
  if (nodes.length < 100) {
    return applyDagreLayout(nodes, edges);
  }

  // ê°„ì†Œí™”ëœ ë ˆì´ì•„ì›ƒ
  return applyDagreLayout(nodes, edges, {
    rankSep: 80,
    nodeSep: 40,
  });
}
```

**ì„±ëŠ¥ ê°œì„ **:

- ë…¸ë“œ 100ê°œ ë¯¸ë§Œ: ì¼ë°˜ ë ˆì´ì•„ì›ƒ
- ë…¸ë“œ 100ê°œ ì´ìƒ: ê°„ê²© ì¶•ì†Œë¡œ ê³„ì‚° ì‹œê°„ ë‹¨ì¶•

---

### 2. ë ˆì´ì•„ì›ƒ ìºì‹±

```typescript
const layoutCache = new Map<string, Node[]>();

function getCachedLayout(nodes: Node[], edges: Edge[]): Node[] | null {
  const key = JSON.stringify({ nodes: nodes.map((n) => n.id), edges });

  if (layoutCache.has(key)) {
    return layoutCache.get(key)!;
  }

  const layoutedNodes = applyDagreLayout(nodes, edges);
  layoutCache.set(key, layoutedNodes);

  return layoutedNodes;
}
```

**íš¨ê³¼**: ë™ì¼í•œ ê·¸ë˜í”„ êµ¬ì¡° ì¬ì‚¬ìš© ì‹œ ì¦‰ì‹œ ë°˜í™˜

---

### 3. Web Worker (ê³„íš - Q2 2025)

```typescript
// worker.ts
self.onmessage = (e) => {
  const { nodes, edges } = e.data;
  const layoutedNodes = applyDagreLayout(nodes, edges);
  self.postMessage(layoutedNodes);
};

// main thread
const worker = new Worker("./layout-worker.ts");
worker.postMessage({ nodes, edges });
worker.onmessage = (e) => {
  setNodes(e.data);
};
```

**íš¨ê³¼**: UI ë¸”ë¡œí‚¹ ì—†ì´ ë°±ê·¸ë¼ìš´ë“œ ë ˆì´ì•„ì›ƒ ê³„ì‚°

---

## ì»¤ìŠ¤í…€ ë ˆì´ì•„ì›ƒ (í–¥í›„)

### ì›í˜• ë ˆì´ì•„ì›ƒ

```typescript
function applyCircularLayout(nodes: Node[]): Node[] {
  const centerX = 500;
  const centerY = 300;
  const radius = 200;

  return nodes.map((node, index) => {
    const angle = (2 * Math.PI * index) / nodes.length;
    return {
      ...node,
      position: {
        x: centerX + radius * Math.cos(angle),
        y: centerY + radius * Math.sin(angle),
      },
    };
  });
}
```

**ì‚¬ìš© ì‚¬ë¡€**: ìˆœí™˜ ì›Œí¬í”Œë¡œìš°, ìƒíƒœ ë¨¸ì‹ 

---

### ê·¸ë¦¬ë“œ ë ˆì´ì•„ì›ƒ

```typescript
function applyGridLayout(nodes: Node[], columns: number = 3): Node[] {
  const nodeWidth = 250;
  const nodeHeight = 100;
  const gapX = 50;
  const gapY = 50;

  return nodes.map((node, index) => {
    const col = index % columns;
    const row = Math.floor(index / columns);

    return {
      ...node,
      position: {
        x: col * (nodeWidth + gapX),
        y: row * (nodeHeight + gapY),
      },
    };
  });
}
```

**ì‚¬ìš© ì‚¬ë¡€**: ë³‘ë ¬ ì‘ì—… ì‹œê°í™”

---

## ì•Œë ¤ì§„ ì œì•½ì‚¬í•­

### ì œì•½ 1: ë³µì¡í•œ ê·¸ë˜í”„ ë ˆì´ì•„ì›ƒ ì§€ì—°

**í˜„ìƒ**: 100ê°œ ì´ìƒ ë…¸ë“œ ì‹œ 1-2ì´ˆ ì†Œìš”

**ëŒ€ì•ˆ**: Web Worker ì‚¬ìš© ê³„íš

**ê³„íš**: Q2 2025

---

### ì œì•½ 2: ìˆ˜ë™ ë°°ì¹˜ í›„ ìë™ ë ˆì´ì•„ì›ƒ ì ìš© ì‹œ ìœ„ì¹˜ ì†ì‹¤

**í˜„ìƒ**: ì‚¬ìš©ì ìˆ˜ë™ ë°°ì¹˜ê°€ ì´ˆê¸°í™”ë¨

**ëŒ€ì•ˆ**: "ë ˆì´ì•„ì›ƒ ì´ˆê¸°í™”" ê²½ê³  í‘œì‹œ

**ê³„íš**: Q1 2025 - ìˆ˜ë™ ë°°ì¹˜ ë³´ì¡´ ì˜µì…˜

---

## í–¥í›„ ë¡œë“œë§µ

### Q1 2025

- âœ… ìˆ˜ë™ ë°°ì¹˜ ë³´ì¡´ ì˜µì…˜
- âœ… ë ˆì´ì•„ì›ƒ ë¯¸ë¦¬ë³´ê¸°
- âœ… ë ˆì´ì•„ì›ƒ ì‹¤í–‰ ì·¨ì†Œ

### Q2 2025

- ğŸ”„ Web Worker ë°±ê·¸ë¼ìš´ë“œ ë ˆì´ì•„ì›ƒ
- ğŸ”„ ì»¤ìŠ¤í…€ ë ˆì´ì•„ì›ƒ ì—”ì§„ (ì›í˜•, ê·¸ë¦¬ë“œ)
- ğŸ”„ ë ˆì´ì•„ì›ƒ í…œí”Œë¦¿ ì €ì¥

---

## ê´€ë ¨ ë¬¸ì„œ

- [F-010: ìë™ ë ˆì´ì•„ì›ƒ](../F-010-ìë™-ë ˆì´ì•„ì›ƒ.md) - ë©”ì¸ ë¬¸ì„œ
- [ë ˆì´ì•„ì›ƒ ì•Œê³ ë¦¬ì¦˜](./ë ˆì´ì•„ì›ƒ-ì•Œê³ ë¦¬ì¦˜.md) - Dagre êµ¬í˜„ ìƒì„¸
- [React Flow ë¬¸ì„œ](https://reactflow.dev/)
- [Dagre ë¬¸ì„œ](https://github.com/dagrejs/dagre/wiki)

---

**ë¬¸ì„œí™” ì›ì¹™ ì¤€ìˆ˜**:

- âœ… 200ì¤„ ì´í•˜
- âœ… í•œê¸€ ì‘ì„±
- âœ… ì „ëµ ë° ìµœì í™” ì¤‘ì‹¬
