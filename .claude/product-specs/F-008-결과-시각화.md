# F-008: 결과 시각화

**기능 ID**: F-008
**우선순위**: P1 (High)
**상태**: ✅ 구현완료
**담당**: Frontend Team
**최종 수정일**: 2025-11-11

---

## 개요

결과 시각화는 워크플로우 실행 결과를 사용자 친화적으로 표시하는 기능입니다. JSON, Table, Raw 세 가지 뷰 모드를 제공하며, 각 스텝별 실행 결과와 에러를 명확히 표시합니다.

**핵심 가치**:
- 직관적인 데이터 확인
- 다양한 뷰 모드
- 에러 디버깅 지원
- 결과 Export

---

## 문서 인덱스

이 문서는 200줄 제한 준수를 위해 하위 문서로 분리되어 있습니다.

**상세 문서**:
- [뷰 모드 구현](./F-008-결과-시각화/뷰-모드-구현.md) - JSON/Table/Raw 뷰, Export 기능
- [에러 처리 및 최적화](./F-008-결과-시각화/에러-처리-최적화.md) - 에러 표시, 타입 정의, 성능 최적화

---

## ResultPanel 컴포넌트

### UI 구조

```
┌─────────────────────────────────────────────────┐
│ 실행 결과                           [JSON][Table][Raw] │
├─────────────────────────────────────────────────┤
│ Status: ✅ Success                              │
│ Total Execution Time: 2.3s                      │
│ Completed At: 2025-11-11 10:30:00              │
├─────────────────────────────────────────────────┤
│ Steps:                                          │
│                                                 │
│ ▼ extract_products (0.8s)                      │
│   ✅ Success                                    │
│   Data: [25 items]                             │
│   ┌───────────────────────────────────────┐   │
│   │ [                                     │   │
│   │   { "name": "Product A", ... },      │   │
│   │   { "name": "Product B", ... }       │   │
│   │ ]                                     │   │
│   └───────────────────────────────────────┘   │
│                                                 │
│ ▼ transform_data (0.2s)                        │
│   ✅ Success                                    │
│   Data: [25 items]                             │
│   ...                                           │
│                                                 │
│               [Copy JSON] [Export CSV]          │
└─────────────────────────────────────────────────┘
```

---

### 컴포넌트 구현

**파일**: `app/client/admin/workflowBuilder/ResultPanel.tsx`

```typescript
export function ResultPanel({
  results
}: {
  results: WorkflowExecutionResult | null;
}) {
  const [viewMode, setViewMode] = useState<"json" | "table" | "raw">("json");
  const [expandedSteps, setExpandedSteps] = useState<Set<string>>(new Set());

  if (!results) {
    return (
      <Card className="p-8 text-center text-muted-foreground">
        워크플로우를 실행하면 결과가 여기에 표시됩니다.
      </Card>
    );
  }

  return (
    <Card className="p-4">
      {/* 헤더 */}
      <div className="flex items-center justify-between mb-4">
        <h3 className="text-lg font-semibold">실행 결과</h3>
        <div className="flex gap-2">
          <Button
            variant={viewMode === "json" ? "default" : "outline"}
            size="sm"
            onClick={() => setViewMode("json")}
          >
            JSON
          </Button>
          <Button
            variant={viewMode === "table" ? "default" : "outline"}
            size="sm"
            onClick={() => setViewMode("table")}
          >
            Table
          </Button>
          <Button
            variant={viewMode === "raw" ? "default" : "outline"}
            size="sm"
            onClick={() => setViewMode("raw")}
          >
            Raw
          </Button>
        </div>
      </div>

      {/* 요약 정보 */}
      <div className="mb-4 p-3 bg-muted rounded-lg">
        <div className="flex items-center gap-2 mb-2">
          {results.success ? (
            <>
              <CheckCircle className="w-5 h-5 text-green-500" />
              <span className="font-semibold">Success</span>
            </>
          ) : (
            <>
              <XCircle className="w-5 h-5 text-red-500" />
              <span className="font-semibold">Failed</span>
            </>
          )}
        </div>
        <div className="text-sm space-y-1">
          <div>Total Execution Time: {results.totalExecutionTime}ms</div>
          <div>Completed At: {new Date(results.completedAt).toLocaleString()}</div>
        </div>
      </div>

      {/* 뷰 모드별 렌더링 */}
      {viewMode === "json" && <JsonView results={results} />}
      {viewMode === "table" && <TableView results={results} />}
      {viewMode === "raw" && <RawView results={results} />}

      {/* 액션 버튼 */}
      <div className="flex gap-2 mt-4">
        <Button
          variant="outline"
          size="sm"
          onClick={() => {
            navigator.clipboard.writeText(JSON.stringify(results, null, 2));
            toast.success("결과를 클립보드에 복사했습니다.");
          }}
        >
          Copy JSON
        </Button>
        <Button
          variant="outline"
          size="sm"
          onClick={() => exportToCSV(results)}
        >
          Export CSV
        </Button>
      </div>
    </Card>
  );
}
```

---

## 관련 문서

- [뷰 모드 구현](./F-008-결과-시각화/뷰-모드-구현.md) - JSON/Table/Raw 뷰 상세
- [에러 처리 및 최적화](./F-008-결과-시각화/에러-처리-최적화.md) - 에러 처리, 최적화
- [F-007: 워크플로우 실행](./F-007-워크플로우-실행.md) - 실행 로직
- [F-009: Import/Export](./F-009-Import-Export.md) - 데이터 내보내기

---

## 파일 위치

- `app/client/admin/workflowBuilder/ResultPanel.tsx` - ResultPanel 컴포넌트
- `app/client/admin/workflowBuilder/WorkflowBuilderPage.tsx` - 페이지 통합

---

**변경 이력**

| 버전 | 날짜 | 변경 내용 | 작성자 |
|-----|------|---------|-------|
| 1.1 | 2025-11-11 | 200줄 제한 준수를 위한 하위 문서 분리 | System |
| 1.0 | 2025-11-11 | 최초 작성 | System |
